<form class="{{cssClass}}" autocomplete="off">
  <div class="sheet-content" style="height:100%; display:flex; flex-direction:column;">

    <!-- The top title bar. -->
    <div class="header-bar">
      <!-- The skill image. -->
      <div class="item-cover-image">
        <img src="{{item.img}}" {{#if owner}}data-edit="img"{{/if}}/>
      </div>

      <!-- The content to the right of the item image. -->
      <div class="name-bar">
        <!-- The name of the item and the item type. -->
        <div style="display:flex;">
          <!-- The name of the item. -->
          <input class="item-name bottom-border" name="name" type="text" value="{{item.name}}" {{#unless owner}}disabeled{{/unless}}/>

          <!-- A spacer which pushes the item type to the right. -->
          <div class="item-roll-button item-image-clickable">{{#if owner}}<i class="fas fa-dice-d20"></i>{{/if}}</div>

          <!-- The box which contains the item type (skill, weapon, etc). -->
          <div class="item-type-box" style="width:90px;">
            <p>{{item.type}}</p>
          </div>
        </div>
      
        <!-- The row below the name of the item. -->
        <div class="item-stats-row">
          <div class="background-informations" style="display:flex; flex-direction:row;">
            <input name="system.level" class="bottom-border" type="number" value="{{system.level}}" {{#unless owner}}disabeled{{/unless}}/>
            <input name="system.source" class="bottom-border" type="text" value="{{system.source}}" {{#unless owner}}disabeled{{/unless}}/>
            <div class="bottom-border" style="flex: 1 1 0; margin-left:10px; margin-right:10px;"><input name="system.prepared" style="margin-left:5px; margin-right:5px;" type="checkbox" {{checked system.prepared}} {{#unless owner}}disabeled{{/unless}}/></div>
            <select name="system.effort" style="padding-left:4px; padding-right:4px; margin-left:5px; margin-right:5px;">
              {{#select system.effort}}
                <option value="">—</option>
                <option value="day">Day</option>
                <option value="scene">Scene</option>
                <option value="current">Current</option>
              {{/select}}
            </select>
          </div>

          <!-- The labels that go beneath skill level, source, dice pool, and default stat. -->
          <div class="item-stats-labels">
            <div style="flex: 1 1"><p>Level</p></div>
            <div style="flex: 1 1"><p>Source</p></div>
            <div style="flex: 1 1"><p>Prepared</p></div>
            <div style="flex: 1 1"><p>Effort</p></div>
          </div>
        </div>

      </div>
    </div>

    <!-- The navagation bar that can be used to switch tabs -->
    <nav class="sheet-tabs tabs" data-group="primary">
      <a class="item" style="border-left:none" data-tab="description">Description</a>
      <a class="item" style="border-right:none" data-tab="details">Details</a>
    </nav>

    <!-- The main item window. -->
    <div class="item-main-window" style="border:none;">

      <!-- The description tab. -->
      <div class="tab description" data-group="primary" data-tab="description">
          <div style="margin-top:10px; display:flex; flex-direction:row; flex-grow:1">
            <div class="item-description">
              <div class="item-main-window-text">{{editor content=system.description target="system.description" button=true owner=owner editable=editable engine="prosemirror" collaborate=false}}</div>
            </div>
        </div>
      </div>

      <!-- The details tab. -->
      <div class="tab details scrollable" style="margin-right:2px" data-group="primary" data-tab="details" >
        <div style="margin:10px; flex-grow: 1; display:flex; flex-direction:column;">

          <p><b><u>General Features:</u></b></p>

          <!-- The duration and range inputs. -->
          <div style="display:flex; flex-direction:row;"> 
            <!-- The durration input. -->
            <div style="flex:1 1 0px; padding-left:5px;">
              <p class="details-headers">Duration:</p>
              <input name="system.duration" class="details-input" value="{{system.duration}}" type="text" style="width:100%" {{#unless owner}}disabeled{{/unless}}/>
            </div>

            <!-- The range input. -->
            <div style="flex:1 1 0px; padding-left:5px;">
              <p class="details-headers">Range:</p>
              <input name="system.range" class="details-input" value="{{system.range}}" type="text" style="width:100%" {{#unless owner}}disabeled{{/unless}}/>
            </div>

            <div style="flex: 2 2 0;padding-left:5px;"></div>
          </div>

          <p style="margin-top:10px;"><b><u>Attribute and Skill:</u></b></p>

          <!-- The default skill which should be used with the weapon. -->
          <div style="display:flex; flex-direction:row;"> 

            <!-- The skill which should be used. -->
            <div style="flex:2 1 0px; padding-left:5px;">
              <p class="details-headers">Skill:</p>
              <select name="system.skillId" style="width:100%">
                {{#select system.skillId}}
                  <option value="">—</option>
                  {{#each item.actor.itemTypes.skill}}
                    <option value="{{this.id}}">{{this.name}}: {{this.system.rank}}</option>
                  {{/each}}
                {{/select}}
              </select>
            </div>

            <!-- The attribute which should be used. -->
            <div style="flex:1 1 0px; padding-left:5px;">
              <p class="details-headers">Attribute:</p>
              <select name="system.attribute" style="width:100%">
                  {{#select system.attribute}}
                  <option value="">—</option>
                  <option value="str">Strength: {{item.actor.system.stats.str.modString}}</option>
                  <option value="dex">Dexterity: {{item.actor.system.stats.dex.modString}}</option>
                  <option value="con">Constitution: {{item.actor.system.stats.con.modString}}</option>
                  <option value="int">Intelligence: {{item.actor.system.stats.int.modString}}</option>
                  <option value="wis">Wisdom: {{item.actor.system.stats.wis.modString}}</option>
                  <option value="cha">Charisma: {{item.actor.system.stats.cha.modString}}</option>
                  {{/select}}
              </select>
            </div>

            <!-- A spacer to push the other elements further left.-->
            <div style="flex: 1 1 0px; padding-left:5px;"></div>

          </div>

          <p style="margin-top:10px;"><b><u>Roll Features:</u></b></p>

          <!-- The roll formula and saving throw inputs. -->
          <div style="display:flex; flex-direction:row;"> 
            <!-- The roll formula input. -->
            <div style="flex:2 1 0px; padding-left:5px;">
              <p class="details-headers">Roll Formula:</p>
              <input name="system.roll" class="details-input" value="{{system.roll}}" type="text" style="width:100%" {{#unless owner}}disabeled{{/unless}}/>
            </div>

            <!-- The saving throw input. -->
            <div style="flex:1 1 0px; padding-left:5px;">
              <p class="details-headers">Save Type:</p>
              <select name="system.save" style="width:100%">
                  {{#select system.save}}
                  <option value="">—</option>
                  <option value="physical">Physical</option>
                  <option value="mental">Mental</option>
                  <option value="evasion">Evasion</option>
                  {{/select}}
              </select>
            </div>

            <div style="flex: 1 1 0;padding-left:5px;"></div>
          </div>

        </div>

      </div>
  
    </div>

  </div>
</form>
